{
  "Routes": [
    {
      "DownstreamPathTemplate": "/Api/{url}", //下游服务的模板路由
      "DownstreamScheme": "http", //下游请求方式
      "UpstreamPathTemplate": "/zhpdapi/gsdx/{url}", //上游路由模板,这个url会转到下游的url
      "UpstreamHttpMethod": [ "Get", "Post" ], //上游的请求谓词限制
      "ServiceName": "zhpdgsdxservice", //使用服务发现的时候,注册到consul的服务名
      "UseServiceDiscovery": true, //是否使用服务发现
      "LoadBalancerOptions": { //配置负载均衡
        "Type": "CustomLoadBalancer"
      },
      "RateLimitOptions": { //限流
        "ClientWhitelist": [], //白名单
        "EnableRateLimiting": false, //是否启用限流
        "Period": "1s", //统计时间段：1s, 5m, 1h, 1d
        "PeriodTimespan": 1, //多少秒之后客户端可以重试
        "Limit": 5  //在统计时间段内允许的最大请求数量
      },
      "AuthenticationOptions": { //认证与授权
        "AuthenticationProviderKey": "ApiGatewayOcelot",
        "AllowScopes": []
      },
      "QoSOptions": { //熔断
        "ExceptionsAllowedBeforeBreaking": 5, //多少个超时请求会触发熔断
        "DurationOfBreak": 3000, //熔断的时间，单位为毫秒
        "TimeoutValue": 20000 //如果下游请求的处理时间超过多少则视如该请求超时,单位为毫秒
      }
    },
    {
      "DownstreamPathTemplate": "/{url}", //下游服务的模板路由
      "DownstreamScheme": "http", //下游请求方式
      "UpstreamPathTemplate": "/zhpdapi/db/{url}", //上游路由模板,这个url会转到下游的url
      "UpstreamHttpMethod": [ "Get", "Post","delete" ], //上游的请求谓词限制
      "ServiceName": "data-center", //使用服务发现的时候,注册到consul的服务名
      "UseServiceDiscovery": true, //是否使用服务发现
      "LoadBalancerOptions": { //配置负载均衡
        "Type": "CustomLoadBalancer"
      },
      "RateLimitOptions": { //限流
        "ClientWhitelist": [], //白名单
        "EnableRateLimiting": false, //是否启用限流
        "Period": "1s", //统计时间段：1s, 5m, 1h, 1d
        "PeriodTimespan": 1, //多少秒之后客户端可以重试
        "Limit": 5  //在统计时间段内允许的最大请求数量
      },
      "AuthenticationOptions": { //认证与授权
        "AuthenticationProviderKey": "ApiGatewayOcelot",
        "AllowScopes": []
      },
      "QoSOptions": { //熔断
        "ExceptionsAllowedBeforeBreaking": 5, //多少个超时请求会触发熔断
        "DurationOfBreak": 3000, //熔断的时间，单位为毫秒
        "TimeoutValue": 20000 //如果下游请求的处理时间超过多少则视如该请求超时,单位为毫秒
      }
    },
    {
      "DownstreamPathTemplate": "/api/{url}", //下游服务的模板路由
      "DownstreamScheme": "http", //下游请求方式
      "UpstreamPathTemplate": "/zhpdapi/report/{url}", //上游路由模板,这个url会转到下游的url
      "UpstreamHttpMethod": [ "Get", "Post" ], //上游的请求谓词限制
      "ServiceName": "report-form", //使用服务发现的时候,注册到consul的服务名
      "UseServiceDiscovery": true, //是否使用服务发现
      "LoadBalancerOptions": { //配置负载均衡
        "Type": "CustomLoadBalancer"
      },
      "RateLimitOptions": { //限流
        "ClientWhitelist": [], //白名单
        "EnableRateLimiting": false, //是否启用限流
        "Period": "1s", //统计时间段：1s, 5m, 1h, 1d
        "PeriodTimespan": 1, //多少秒之后客户端可以重试
        "Limit": 5  //在统计时间段内允许的最大请求数量
      },
      "AuthenticationOptions": { //认证与授权
        "AuthenticationProviderKey": "ApiGatewayOcelot",
        "AllowScopes": []
      },
      "QoSOptions": { //熔断
        "ExceptionsAllowedBeforeBreaking": 5, //多少个超时请求会触发熔断
        "DurationOfBreak": 3000, //熔断的时间，单位为毫秒
        "TimeoutValue": 60000 //如果下游请求的处理时间超过多少则视如该请求超时,单位为毫秒
      }
    }
  ],
  "GlobalConfiguration": { //全局配置
    "ServiceDiscoveryProvider": { //配置Consul服务器
      "Scheme": "http",
      "Host": "192.168.0.199", //Consul的ip地址
      "Port": 8500, //Consul的端口
      "Type": "Consul"
    },
    "RateLimitOptions": {
      "DisableRateLimitHeaders": false, 
      "QuotaExceededMessage": "请求过于频繁，请1秒后再试。", 
      "HttpStatusCode": 429, 
      "ClientIdHeader": "CenBoOutLimit"
    }
  }
}